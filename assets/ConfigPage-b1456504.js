import{r as s,j as e}from"./index-c362957b.js";import{a as x}from"./axios-21b846bc.js";import{d as p,c as f}from"./urlsUsers-ca1c08d1.js";import"./baseUrl-32bae851.js";function g(){const[t,a]=s.useState(!1),r=async()=>{try{await x.delete(p,{headers:{Authorization:`Token ${window.localStorage.getItem("token")}`}}),window.localStorage.removeItem("token")}catch(n){console.error("Error al eliminar la cuenta:",n)}finally{window.location.href="/"}};return e.jsx(e.Fragment,{children:t?e.jsxs("div",{className:"mt-4",children:[e.jsx("button",{className:"px-3 py-2 mr-2 text-white bg-red-500 rounded-md",onClick:r,children:"Sí, eliminar"}),e.jsx("button",{className:"px-3 py-2 text-gray-700 bg-gray-300 rounded-md",onClick:()=>a(!1),children:"Cancelar"})]}):e.jsx("div",{className:"mt-4",children:e.jsx("button",{className:"px-3 py-2 mx-auto text-white bg-red-500 rounded-md",onClick:()=>a(!0),children:"Eliminar cuenta"})})})}function b({handleLogout:t}){return e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:t,className:"px-3 py-2 mx-auto text-white bg-red-500 rounded-md",children:"Cerrar sesión"})})}function j({setShowAlert:t}){return e.jsx("div",{className:"fixed left-0 right-0 flex justify-center top-4",children:e.jsx("div",{role:"alert",className:"relative p-4 bg-white border border-gray-100 shadow-xl rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("span",{className:"text-green-600",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("strong",{className:"block font-medium text-gray-900",children:" Cambios guardados "}),e.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"La contraseña se guardo correctamente."})]}),e.jsxs("button",{className:"text-gray-500 transition hover:text-gray-600",onClick:()=>t(!1),children:[e.jsx("span",{className:"sr-only",children:"Dismiss popup"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})]})})})}function v(){const[t,a]=s.useState(""),[r,n]=s.useState(""),[l,i]=s.useState(""),[c,d]=s.useState(""),[h,u]=s.useState(!1),w=async o=>{if(o.preventDefault(),r!==l){d("Las contraseñas no coinciden.");return}try{const m=window.localStorage.getItem("token");await x.put(f,{current_password:t,new_password:r},{headers:{Authorization:`Token ${m}`}}),d(""),a(""),n(""),i(""),u(!0)}catch{d("La contraseña que ingresó es incorrecta.")}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mt-4",children:[e.jsxs("form",{onSubmit:w,className:"flex flex-col justify-between gap-4",children:[e.jsx("article",{className:"mb-4",children:e.jsxs("label",{htmlFor:"currentPassword",className:"block px-3 py-2 overflow-hidden border border-gray-200 rounded-md shadow-sm focus-within:border-blue-600 focus-within:ring-1 focus-within:ring-blue-600 focus-within:text-blue-500",children:["Contraseña actual",e.jsx("input",{className:"w-full p-0 mt-1 text-white bg-transparent border-none focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm",type:"password",id:"currentPassword",value:t,onChange:o=>a(o.target.value),required:!0})]})}),e.jsx("article",{className:"mb-4",children:e.jsxs("label",{htmlFor:"newPassword",className:"block px-3 py-2 overflow-hidden border border-gray-200 rounded-md shadow-sm focus-within:border-blue-600 focus-within:ring-1 focus-within:ring-blue-600 focus-within:text-blue-500",children:["Nueva contraseña",e.jsx("input",{className:"w-full p-0 mt-1 text-white bg-transparent border-none focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm",type:"password",id:"newPassword",value:r,onChange:o=>n(o.target.value),required:!0})]})}),e.jsx("article",{className:"mb-4",children:e.jsxs("label",{htmlFor:"confirmNewPassword",className:"block px-3 py-2 overflow-hidden border border-gray-200 rounded-md shadow-sm focus-within:border-blue-600 focus-within:ring-1 focus-within:ring-blue-600 focus-within:text-blue-500",children:["Confirmar nueva contraseña",e.jsx("input",{className:"w-full p-0 mt-1 text-white bg-transparent border-none focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm",type:"password",id:"confirmNewPassword",value:l,onChange:o=>i(o.target.value),required:!0})]})}),e.jsx("div",{className:"text-red-600",children:c}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-500 rounded-md hover:bg-blue-600",children:"Cambiar contraseña"})]}),h&&e.jsx(j,{setShowAlert:u})]})})}function P({handleLogout:t}){const[a,r]=s.useState(),[n,l]=s.useState(),[i,c]=s.useState();return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"relative p-4 text-3xl font-bold tracking-tight text-white max-lg:hidden",children:"Configuración"}),e.jsxs("main",{className:"flex w-full h-full max-w-3xl gap-4 px-4 py-4 mx-auto max-md:flex-col lg:py-16",children:[e.jsxs("ul",{className:"flex w-full py-4 rounded-md max-md:overflow-x-auto max-md:justify-center max-md:items-center md:w-2/3 md:flex-col bg-palette-2 ",children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>{r(!0),l(!1),c(!1)},className:`flex items-center w-full gap-2 border-s-[3px] border-transparent px-4 py-3 text-gray-500 hover:border-palette-5 hover:bg-palette-3 hover:text-palette-white ${a?"bg-palette-3 border-palette-6 text-palette-white":""}`,k:!0,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 opacity-75",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("span",{className:"text-sm font-medium",children:" Administrar cuenta "})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>{r(!1),l(!0),c(!1)},className:`flex items-center w-full gap-2 border-s-[3px] border-transparent px-4 py-3 text-gray-500 hover:border-palette-5 hover:bg-palette-3 hover:text-palette-white ${n?"bg-palette-3 border-palette-6 text-palette-white":""}`,children:[e.jsx("i",{className:"relative flex items-center justify-center w-5 h-5 fa-solid fa-lock"}),e.jsx("span",{className:"text-sm font-medium",children:" Privacidad "})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>{r(!1),l(!1),c(!0)},className:`flex w-full items-center md:border-t gap-2 border-s-[3px] border-s-transparent md:border-t-gray-500 px-4 py-3 text-gray-500 hover:border-s-palette-5 md:hover:bg-palette-3 md:hover:text-palette-white  ${i?"bg-palette-3 border-palette-6 text-palette-white":""}`,children:[e.jsx("i",{className:"relative flex items-center justify-center w-5 h-5 fa-solid fa-right-from-bracket"}),e.jsx("span",{className:"text-sm font-medium ",children:" Cerrar sesión "})]})})]}),e.jsxs("div",{className:"flex flex-col w-full h-full p-4 overflow-auto rounded-md bg-palette-2",children:[a&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-white ",children:"Eliminar cuenta"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"¿Estás seguro que quieres eliminar tu cuenta?"}),e.jsx(g,{})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-white ",children:"Cerrar sesión"}),e.jsx(b,{handleLogout:t})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-white ",children:"Cambiar contraseña"}),e.jsx(v,{})]})]})]})]})}export{P as default};
