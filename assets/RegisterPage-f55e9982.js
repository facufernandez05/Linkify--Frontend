import{r,V as y,F as h,L as f,E as p,j as e,a as v,s as j}from"./index-c362957b.js";import{a as N}from"./axios-21b846bc.js";import{u as C}from"./urlsAuthentication-d973b73d.js";import{E as m,a as u}from"./EyeFilledIcon-fa740467.js";import{i as l}from"./chunk-XQ2PV7KF-204bdf7f.js";import{b as x}from"./chunk-IPGVXZ3J-42ffdda3.js";import{B as E}from"./baseUrl-32bae851.js";const i={label:"text-gray-700",inputWrapper:["border-2","border-gray-400","shadow-xl"],input:"text-gray-700"},I=()=>{r.useContext(y);const{formData:t,setFormData:a}=r.useContext(h),{setLoading:c}=r.useContext(f),{setError:n}=r.useContext(p),[o,d]=r.useState({password:!1,confirmPassword:!1}),g=async()=>{c(!0);try{const s=await N.post(C,t);n(""),a({...t,email:s.data.email}),a({...t,username:s.data.username}),a({...t,password:s.data.password}),window.localStorage.setItem("formData",JSON.stringify(t)),window.localStorage.setItem("Code verification",!0),window.localStorage.setItem("jwt",s.data.codigo),window.location.href="/register/code_verification"}catch(s){s.response.data.error.includes("email","correo")&&a({...t,email:""}),s.response.data.error.includes("nombre de usuario")&&a({...t,username:""}),s.response.data.error.includes("contraseñas")?(a({...t,password:""}),a({...t,password2:""})):console.error("Error en el registro:",s),n(s.response.data.error)}finally{c(!1)}};return e.jsxs("form",{className:"flex flex-col space-y-6",method:"POST",children:[S.map((s,w)=>e.jsx(l,{label:s.label,type:s.type,onChange:b=>a({...t,[s.value]:b.target.value}),variant:"bordered",value:t[s.value],color:s.color,classNames:i},w)),e.jsx(l,{label:"Contraseña",variant:"bordered",color:"danger",classNames:i,endContent:e.jsx(x,{isIconOnly:!0,variant:"light",className:"focus:outline-none",onClick:()=>d({...o,password:!o.password}),children:o.password?e.jsx(m,{className:"text-2xl pointer-events-none text-default-400"}):e.jsx(u,{className:"text-2xl pointer-events-none text-default-400"})}),type:o.password?"text":"password",value:t.password,onChange:s=>a({...t,password:s.target.value}),required:!0}),e.jsx(l,{label:"Confirmar contraseña",variant:"bordered",color:"danger",classNames:i,endContent:e.jsx(x,{isIconOnly:!0,variant:"light",className:"focus:outline-none",onClick:()=>d({...o,confirmPassword:!o.confirmPassword}),children:o.confirmPassword?e.jsx(m,{className:"text-2xl pointer-events-none text-default-400"}):e.jsx(u,{className:"text-2xl pointer-events-none text-default-400"})}),type:o.confirmPassword?"text":"password",value:t.password2,onChange:s=>a({...t,password2:s.target.value}),required:!0}),e.jsxs("footer",{className:"flex-col",children:[e.jsx("button",{onClick:g,className:"flex items-center justify-center w-full rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:e.jsx("span",{className:"m-auto",children:"Registrarse"})}),e.jsxs("p",{className:"mt-10 text-sm text-center text-gray-600",children:["¿Tienes una cuenta?"," ",e.jsx(v,{to:"/login",className:"font-semibold leading-6 text-indigo-600 hover:text-indigo-500",onClick:()=>n(),children:"Inicia sesión"})]})]})]})},S=[{label:"Nombre y apellido",type:"text",value:"name",color:"primary"},{label:"Nombre de usuario",type:"text",value:"username",color:"primary"},{label:"Correo electrónico",type:"email",value:"email",color:"primary"}],R="/media/icons/logo_text.webp";function V(){const{loading:t}=r.useContext(f),{error:a}=r.useContext(p);return e.jsx("div",{className:"flex flex-col justify-center min-h-screen px-6 py-12 bg-gradient-to-tr from-blue-400 to-red-300 lg:px-8",children:e.jsxs("main",{className:"h-full p-6 mx-auto overflow-y-auto bg-gray-200 border-2 border-gray-300 rounded-md shadow-sm md:max-w-screen-sm w-80 md:w-96",children:[!t&&e.jsx("header",{className:"flex items-center justify-center w-full",children:e.jsx("img",{src:E+R,alt:"Logo",className:"object-cover w-40 h-20"})}),!t&&a&&e.jsx("p",{className:"mb-4 text-center text-red-500",children:a}),e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:t?e.jsx(j,{className:"flex justify-center mx-auto",size:"lg"}):e.jsx(I,{})})]})})}export{V as RegisterForm,V as default};
